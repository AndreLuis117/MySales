@model TesteFabrica.MVC.ViewModels.PedidoViewModel


@{
    ViewBag.Title = "Criação de pedido";
}

    <body background="~/Content/Images/restaurant_icons.png">

        <div class="card">
            <div class="card-body">
                <h2 align="left" class="card-title">Novo pedido</h2>


                @using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()

                    <div class="form-horizontal">
                        <hr />
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })


                        <div class="form-row">
                            @{ Html.EnableClientValidation(false); }
                            @Html.LabelFor(model => model.ValorTotal, htmlAttributes: new { @class = "control-label col-md-1" })

                            <div class="control-label col-md-1">
                                @Html.DisplayTextFor(model => model.ValorTotal)
                            </div>
                        </div>
                        <br/>

                        <div class="form-row" align="center">
                            <div align="center">
                                <a align="left " class="btn btn-primary" href="@Url.Action("Create", "ItensPedido")">
                                    Adicionar item no pedido
                                </a>
                                <a align="center" class="btn btn-danger" href="@Url.Action("CancelarPed", "Pedido")">
                                    Cancelar pedido
                                </a>
                                <button type="submit" class="btn btn-success">
                                    Finalizar pedido
                                </button>
                            </div>
                        </div>
                    </div>
                    <br/>
                }

                <table class="table">
                    <tr>
                        <th class="text-center">
                            ID Produto
                        </th>
                        <th class="text-center">
                            Nome
                        </th>
                        <th class="text-center">
                            Preço Unitário
                        </th>
                        <th class="text-center">
                            Quantidade
                        </th>
                        <th class="text-center">
                            SubTotal
                        </th>
                        <th class="text-center">
                            Remover
                        </th>
                    </tr>

                    @foreach (var item in Model.ItensPedidos)
                    {
                        <tr>
                            <td align="center">
                                @Html.DisplayFor(modelItem => item.ProdutoId)
                            </td>
                            <td align="center">
                                @Html.DisplayFor(modelItem => item.Produto.Nome)
                            </td>
                            <td align="center">
                                @Html.DisplayFor(modelItem => item.Produto.Preco)
                            </td>
                            <td align="center">
                                @Html.DisplayFor(modelItem => item.Qtde)
                            </td>
                            <td align="center">
                                @Html.DisplayFor(modelItem => item.SubTotal)
                            </td>
                            <td align="center">
                                <a class='btn btn-danger' href='@Url.Action("RemoverItem", "Pedido", new { id = item.ProdutoId })'>
                                    <i class="fas fa-trash" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>
                    }
            </div>
        </div>
        </table>

        @section Scripts {
            @Scripts.Render("~/bundles/jqueryval")
        }
    </body>